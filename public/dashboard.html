<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Swift Hub Control</title>

<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Anton&display=swap" rel="stylesheet">

<style>

*{
  box-sizing:border-box;
  font-family:"Orbitron",sans-serif;
}

body{
  margin:0;
  background:#000;
  color:#fff;
  overflow-x:hidden;
}

/* ================= Background ================= */

#bg{
  position:fixed;
  inset:0;
  z-index:-1;
  opacity:.12;
  background:linear-gradient(180deg,#111,#000,#111);
  animation:bgmove 14s linear infinite;
}

@keyframes bgmove{
  from{background-position:0%}
  to{background-position:200%}
}

/* ================= Header ================= */

header{
  text-align:center;
  padding:18px 10px;
  background:#000;
  border-bottom:3px solid #fff;
  position:relative;
}

/* Menu */

.menu{
  position:absolute;
  left:15px;
  top:15px;
  font-size:26px;
  cursor:pointer;
  user-select:none;
}

/* Back */

.back{
  position:absolute;
  left:15px;
  top:15px;
  font-size:26px;
  cursor:pointer;
  display:none;
}

/* ================= Title ================= */

.title{
  font-family:"Anton",sans-serif;
  font-size:30px;
  letter-spacing:4px;

  background:linear-gradient(
    90deg,
    #ff0000,
    #ffffff,
    #ff0000
  );

  background-size:300%;
  -webkit-background-clip:text;
  color:transparent;

  animation:titleFlow 4s linear infinite;

  text-shadow:
    0 0 15px #fff,
    0 0 30px #000;
}

@keyframes titleFlow{
  from{background-position:0%}
  to{background-position:300%}
}

/* ================= Sections ================= */

#mainPage,
#chartPage{
  display:none;
}

#mainPage{
  display:block;
}

/* ================= Stats ================= */

.stats{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  padding:12px;
}

.stat{
  background:#050505;
  border:2px solid #fff;
  animation:boxBlink 1.2s infinite alternate;
  padding:10px;
  text-align:center;
  border-radius:6px;
}

@keyframes boxBlink{
  0%{box-shadow:0 0 5px #fff}
  100%{box-shadow:0 0 18px #fff}
}

.stat span{
  font-size:24px;
  font-weight:700;
}

/* ================= Table ================= */

.container{
  padding:8px;
}

table{
  width:100%;
  border-spacing:0 8px;
}

th,td{
  text-align:center;
}

th{
  border-bottom:2px solid #fff;
  padding:8px;
}

td{
  padding:10px 5px;
}

tr{
  background:#0b0b0b;
  border:3px solid #fff;
  animation:rowBlink 1s infinite alternate;
}

@keyframes rowBlink{
  0%{box-shadow:0 0 6px #fff}
  100%{box-shadow:0 0 20px #fff}
}

/* ================= Status ================= */

.status{
  font-size:20px;
  animation:blink 1.2s infinite;
}

@keyframes blink{
  0%{opacity:1}
  50%{opacity:.5}
  100%{opacity:1}
}

.free{color:#00ff88}
.using{color:#ffe600}
.expired{color:#ff3333}

/* ================= Chart ================= */

.chartBox{
  padding:20px;
  text-align:center;
}

canvas{
  width:100%;
  max-width:600px;
  height:300px;
  background:#050505;
  border:2px solid #fff;
  box-shadow:0 0 20px #fff;
}

/* ================= Footer ================= */

footer{
  text-align:center;
  font-size:11px;
  color:#777;
  padding:12px;
}

</style>
</head>

<body>

<div id="bg"></div>

<header>

  <div class="menu" id="menuBtn">‚ò∞</div>
  <div class="back" id="backBtn">‚¨Ö</div>

  <div class="title" id="pageTitle">SWIFT HUB ‚Ä¢ KEY CONTROL</div>

</header>

<!-- ================= MAIN PAGE ================= -->

<div id="mainPage">

<div class="stats">

  <div class="stat">
    <h3>Total</h3>
    <span id="total">0</span>
  </div>

  <div class="stat">
    <h3>Free</h3>
    <span id="free">0</span>
  </div>

  <div class="stat">
    <h3>Used</h3>
    <span id="used">0</span>
  </div>

</div>

<div class="container">

<table>

<thead>
<tr>
  <th>No.</th>
  <th>üë§ User</th>
  <th>üîë Key</th>
  <th>üö¶ Status</th>
  <th>‚è± Time</th>
</tr>
</thead>

<tbody id="data"></tbody>

</table>

</div>

</div>

<!-- ================= CHART PAGE ================= -->

<div id="chartPage">

<div class="chartBox">

<h2>üìä Usage Statistics (%)</h2>

<canvas id="chart"></canvas>

</div>

</div>

<footer>
Swift Hub ¬© 2026 ‚Ä¢ Secure System
</footer>

<script>

/* ================= Switch Page ================= */

const main=document.getElementById("mainPage");
const chart=document.getElementById("chartPage");
const menu=document.getElementById("menuBtn");
const back=document.getElementById("backBtn");
const title=document.getElementById("pageTitle");

menu.onclick=()=>{

  main.style.display="none";
  chart.style.display="block";

  menu.style.display="none";
  back.style.display="block";

  title.textContent="STATISTICS DASHBOARD";

  drawChart();
};

back.onclick=()=>{

  chart.style.display="none";
  main.style.display="block";

  back.style.display="none";
  menu.style.display="block";

  title.textContent="SWIFT HUB ‚Ä¢ KEY CONTROL";
};

/* ================= Time ================= */

function format(ms){

  if(ms<=0) return "00:00:00";

  let s=Math.floor(ms/1000);

  let h=Math.floor(s/3600);
  let m=Math.floor((s%3600)/60);
  let se=s%60;

  return `${h}:${m}:${se}`;
}

/* ================= Load ================= */

let lastData=[];

async function load(){

  try{

    const res=await fetch("/api/dashboard");
    const data=await res.json();

    lastData=data;

    let html="";

    let total=data.length;
    let free=0;
    let used=0;

    data.forEach((k,i)=>{

      let st="",cls="",time="";

      if(!k.used){

        st="üü¢";
        cls="free";
        time="06:00:00";
        free++;

      }else if(k.left>0){

        st="üü°";
        cls="using";
        time=format(k.left);
        used++;

      }else{

        st="üî¥";
        cls="expired";
        time="EXPIRED";
        used++;
      }

      html+=`
      <tr>
        <td>${i+1}</td>
        <td>${k.user||"‚Äî"}</td>
        <td>${k.key.slice(0,26)}...</td>
        <td class="status ${cls}">${st}</td>
        <td>${time}</td>
      </tr>
      `;
    });

    document.getElementById("data").innerHTML=html;

    document.getElementById("total").textContent=total;
    document.getElementById("free").textContent=free;
    document.getElementById("used").textContent=used;

  }catch(e){
    console.log(e);
  }
}

/* ================= Chart ================= */

function drawChart(){

  const c=document.getElementById("chart");
  const ctx=c.getContext("2d");

  ctx.clearRect(0,0,c.width,c.height);

  let months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

  let values=new Array(12).fill(0);

  lastData.forEach(k=>{

    if(k.used && k.left>0){

      let d=new Date();
      let m=d.getMonth();

      values[m]++;
    }
  });

  let max=Math.max(...values,1);

  let w=c.width=600;
  let h=c.height=300;

  ctx.strokeStyle="#fff";
  ctx.beginPath();

  values.forEach((v,i)=>{

    let x=50+(i*45);
    let y=h-40-(v/max*200);

    if(i===0) ctx.moveTo(x,y);
    else ctx.lineTo(x,y);

    let percent=Math.floor((v/max)*100);

    ctx.fillStyle=v/max>0.5?"#00ff00":"#ff0000";

    ctx.shadowBlur=15;
    ctx.shadowColor=ctx.fillStyle;

    ctx.fillText(percent+"%",x-10,y-10);
  });

  ctx.lineWidth=3;
  ctx.strokeStyle="#00ff00";
  ctx.shadowColor="#00ff00";
  ctx.shadowBlur=20;

  ctx.stroke();

}

load();
setInterval(load,5000);

</script>

</body>
</html>
