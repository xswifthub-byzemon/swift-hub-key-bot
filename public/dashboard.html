<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Swift Hub Control</title>

<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Anton&display=swap" rel="stylesheet">

<style>

/* ===== BASE ===== */

*{
  box-sizing:border-box;
  font-family:"Orbitron",sans-serif;
}

body{
  margin:0;
  background:#000;
  color:#fff;
}

/* ===== BG ===== */

#bg{
  position:fixed;
  inset:0;
  z-index:-1;
  opacity:.12;
  background:linear-gradient(180deg,#111,#000,#111);
  animation:bgmove 14s linear infinite;
}

@keyframes bgmove{
  from{background-position:0%}
  to{background-position:200%}
}

/* ===== HEADER ===== */

header{
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
  padding:14px;
  background:#000;
  border-bottom:3px solid #fff;
}

.menu,.back{
  position:absolute;
  left:12px;
  top:50%;
  transform:translateY(-50%);
  font-size:24px;
  cursor:pointer;
}

.back{display:none}

/* ===== TITLE ===== */

.title{
  font-family:"Anton",sans-serif;
  font-size:24px;
  letter-spacing:3px;
  background:linear-gradient(90deg,#ff0000,#fff,#ff0000);
  background-size:300%;
  -webkit-background-clip:text;
  color:transparent;
  animation:titleFlow 4s linear infinite;
  text-shadow:0 0 12px #fff,0 0 25px #000;
}

@keyframes titleFlow{
  from{background-position:0%}
  to{background-position:300%}
}

/* ===== PANEL ===== */

#panel{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.95);
  display:none;
  z-index:99;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  gap:20px;
}

.panel-btn{
  padding:12px 25px;
  border:2px solid #fff;
  background:#000;
  color:#fff;
  font-size:18px;
  cursor:pointer;
  animation:panelBlink 1s infinite alternate;
}

@keyframes panelBlink{
  0%{box-shadow:0 0 5px #fff}
  100%{box-shadow:0 0 18px #fff}
}

/* ===== STATS ===== */

.stats{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:8px;
  padding:10px;
}

.stat{
  background:#050505;
  border:2px solid #fff;
  padding:8px;
  text-align:center;
  animation:boxBlink 1.3s infinite alternate;
}

@keyframes boxBlink{
  0%{box-shadow:0 0 5px #fff}
  100%{box-shadow:0 0 15px #fff}
}

.stat span{
  font-size:22px;
  font-weight:700;
}

/* ===== TABLE ===== */

.container{padding:6px}

table{
  width:100%;
  border-collapse:collapse;
}

th{
  background:#000;
  padding:6px;
  font-size:12px;
  border:1px solid #fff;
}

th span{
  animation:emojiBlink 1.2s infinite;
}

@keyframes emojiBlink{
  0%{text-shadow:0 0 5px #fff}
  50%{text-shadow:0 0 15px #fff}
  100%{text-shadow:0 0 5px #fff}
}

td{
  padding:6px;
  font-size:12px;
  text-align:center;
  border:1px solid #fff;
  word-break:break-all;
}

/* ===== COPY ===== */

.copyBtn{
  cursor:pointer;
  margin-left:4px;
  font-size:14px;
  animation:copyGlow 1s infinite alternate;
}

@keyframes copyGlow{
  from{text-shadow:0 0 5px #0f0}
  to{text-shadow:0 0 15px #0f0}
}

/* ===== STATUS ===== */

.status{font-size:20px}

.free{
  color:#00ff88;
  animation:greenBlink 1s infinite;
  text-shadow:0 0 12px #00ff88;
}

.using{
  color:#ffe600;
  animation:yellowBlink 1s infinite;
  text-shadow:0 0 12px #ffe600;
}

.expired{
  color:#ff3333;
  animation:redBlink 1s infinite;
  text-shadow:0 0 12px #ff3333;
}

/* ===== CHART ===== */

#chartPage,#testPage{
  display:none;
  padding:12px;
  text-align:center;
}

canvas{
  width:100%;
  max-width:500px;
  height:260px;
  background:#050505;
  border:2px solid #fff;
}

/* ===== FOOTER ===== */

footer{
  text-align:center;
  font-size:11px;
  color:#777;
  padding:10px;
}

</style>
</head>

<body>

<div id="bg"></div>

<!-- PANEL -->

<div id="panel">

  <div class="panel-btn" onclick="openChart()">üìä Statistics</div>
  <div class="panel-btn" onclick="openTest()">üß™ Key Test</div>
  <div class="panel-btn" onclick="closePanel()">‚ùå Close</div>

</div>

<header>

  <div class="menu" id="menuBtn" onclick="openPanel()">‚ò∞</div>
  <div class="back" id="backBtn" onclick="backHome()">‚Üê</div>

  <div class="title">SWIFT HUB ‚Ä¢ KEY CONTROL</div>

</header>

<!-- HOME -->

<div id="mainPage">

<div class="stats">

  <div class="stat">Total<br><span id="total">0</span></div>
  <div class="stat">Free<br><span id="free">0</span></div>
  <div class="stat">Used<br><span id="used">0</span></div>

</div>

<div class="container">

<table>

<thead>
<tr>
  <th>#</th>
  <th><span>üë§</span> User</th>
  <th><span>üîë</span> Key</th>
  <th><span>üö¶</span> Status</th>
  <th><span>‚è±</span> Time</th>
</tr>
</thead>

<tbody id="data"></tbody>

</table>

</div>

</div>

<!-- CHART -->

<div id="chartPage">

<h3>üìä Monthly Usage (%)</h3>

<canvas id="chart"></canvas>

</div>

<!-- TEST -->

<div id="testPage">

<h3>üß™ Key Test</h3>

<div class="container">

<table>

<thead>
<tr>
  <th>#</th>
  <th><span>üìõ</span> Name</th>
  <th><span>üîë</span> Key</th>
  <th><span>üìã</span> Copy</th>
  <th><span>üö¶</span> Status</th>
  <th><span>‚è±</span> Time</th>
</tr>
</thead>

<tbody id="testData"></tbody>

</table>

</div>

</div>

<footer>
Swift Hub ¬© 2026
</footer>

<script>

/* ===== PANEL ===== */

function openPanel(){ panel.style.display="flex"; }
function closePanel(){ panel.style.display="none"; }

/* ===== NAV ===== */

function openChart(){

  closePanel();

  mainPage.style.display="none";
  testPage.style.display="none";
  chartPage.style.display="block";

  menuBtn.style.display="none";
  backBtn.style.display="block";

  drawChart();
}

function openTest(){

  closePanel();

  mainPage.style.display="none";
  chartPage.style.display="none";
  testPage.style.display="block";

  menuBtn.style.display="none";
  backBtn.style.display="block";
}

function backHome(){

  chartPage.style.display="none";
  testPage.style.display="none";
  mainPage.style.display="block";

  menuBtn.style.display="block";
  backBtn.style.display="none";
}

/* ===== TIME ===== */

function format(ms){

  if(ms===null) return "‚àû";
  if(ms<=0) return "00:00:00";

  let s=Math.floor(ms/1000);

  let h=Math.floor(s/3600);
  let m=Math.floor((s%3600)/60);
  let se=s%60;

  return `${h.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}:${se.toString().padStart(2,"0")}`;
}

/* ===== COPY ===== */

function copyKey(t){

  navigator.clipboard.writeText(t);
  alert("‚úÖ Copied!");
}

/* ===== DATA ===== */

let cacheData=[];

async function load(){

  const res=await fetch("/api/dashboard");
  const data=await res.json();

  cacheData=data;

  let html="";
  let testHtml="";

  let total=data.length;
  let free=0;
  let used=0;

  let idx=1;
  let tidx=1;

  data.forEach(k=>{

    let st="",cls="",time="";

    if(!k.used){

      st="üü¢";
      cls="free";
      time="06:00:00";
      free++;

    }else if(k.left>0 || k.left===null){

      st="üü°";
      cls="using";
      time=format(k.left);
      used++;

    }else{

      st="üî¥";
      cls="expired";
      time="EXPIRED";
      used++;
    }

    // NORMAL
    if(k.type!=="test"){

      html+=`
      <tr>
        <td>${idx++}</td>
        <td>${k.user||"‚Äî"}</td>
        <td>
          ${k.key.slice(0,24)}...
          <span class="copyBtn" onclick="copyKey('${k.key}')">üìã</span>
        </td>
        <td class="status ${cls}">${st}</td>
        <td>${time}</td>
      </tr>`;
    }

    // TEST
    if(k.type==="test"){

      testHtml+=`
      <tr>
        <td>${tidx++}</td>
        <td>${k.name||"-"}</td>
        <td>${k.key}</td>
        <td>
          <span class="copyBtn" onclick="copyKey('${k.key}')">üìã</span>
        </td>
        <td class="status ${cls}">${st}</td>
        <td>${time}</td>
      </tr>`;
    }

  });

  dataEl.innerHTML=html;
  testData.innerHTML=testHtml;

  totalEl.textContent=total;
  freeEl.textContent=free;
  usedEl.textContent=used;
}

/* ===== CHART ===== */

function drawChart(){

  const cvs=document.getElementById("chart");
  const ctx=cvs.getContext("2d");

  cvs.width=500;
  cvs.height=260;

  ctx.clearRect(0,0,500,260);

  let months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

  let total=cacheData.length;
  let used=cacheData.filter(k=>k.used).length;

  let percent= total>0 ? Math.round((used/total)*100) : 0;

  let values=[];

  for(let i=0;i<12;i++){

    let v=percent + Math.floor(Math.random()*12-6);

    if(v<5) v=5;
    if(v>100) v=100;

    values.push(v);
  }

  ctx.strokeStyle="#333";

  for(let i=0;i<=5;i++){

    let y=30+i*40;

    ctx.beginPath();
    ctx.moveTo(40,y);
    ctx.lineTo(480,y);
    ctx.stroke();

    ctx.fillStyle="#aaa";
    ctx.fillText((100-i*20)+"%",5,y+5);
  }

  let color= percent>50 ? "#00ff88" : "#ff3333";

  ctx.beginPath();

  values.forEach((v,i)=>{

    let x=40+i*(440/11);
    let y=30+(100-v)*2;

    if(i==0) ctx.moveTo(x,y);
    else ctx.lineTo(x,y);
  });

  ctx.strokeStyle=color;
  ctx.lineWidth=3;

  ctx.shadowBlur=20;
  ctx.shadowColor=color;

  ctx.stroke();

  values.forEach((v,i)=>{

    let x=40+i*(440/11);
    let y=30+(100-v)*2;

    ctx.beginPath();
    ctx.arc(x,y,4,0,Math.PI*2);

    ctx.fillStyle=color;
    ctx.fill();
  });

  ctx.fillStyle="#fff";

  months.forEach((m,i)=>{

    let x=40+i*(440/11);

    ctx.fillText(m,x-10,250);
  });
}

/* ===== START ===== */

load();
setInterval(load,2000);

</script>

</body>
</html>
